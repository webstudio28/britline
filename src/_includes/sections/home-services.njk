<section class="section-padding bg-brand-buttercream" id="services">
  <div class="container-custom">
    {% from "macros/ui.njk" import sectionHeader %}
    {% set s = home.services %}
    <div class="flex flex-nowrap items-center justify-between gap-4">
      <div class="min-w-0 flex-1">
        {{ sectionHeader(s.eyebrow, s.title, s.subtitle) }}
      </div>
      <div class="flex items-center gap-2 shrink-0" aria-hidden="true">
        <button type="button" id="services-scroll-prev" class="services-nav-btn w-9 h-9 rounded-full border-2 border-brand-blue text-brand-blue flex items-center justify-center hover:bg-brand-blue hover:text-white transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-blue/50 disabled:opacity-40 disabled:pointer-events-none" aria-label="Scroll services left">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
        </button>
        <button type="button" id="services-scroll-next" class="services-nav-btn w-9 h-9 rounded-full border-2 border-brand-blue text-brand-blue flex items-center justify-center hover:bg-brand-blue hover:text-white transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-blue/50 disabled:opacity-40 disabled:pointer-events-none" aria-label="Scroll services right">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
        </button>
      </div>
    </div>
  </div>
  <div id="services-strip" class="w-full drag-scroll overflow-x-auto pb-2 cursor-grab active:cursor-grabbing select-none scrollbar-hide" data-step="one-card">
    <div class="flex gap-8 services-strip-inner min-w-max">
      {% for item in s.items %}
      <div class="flex flex-col flex-shrink-0 w-64 md:w-72 service-card">
        <img src="{{ ('/assets/images/' ~ item.image) | url }}" alt="{{ item.title }}" class="aspect-square w-full object-cover rounded-xl mb-3" loading="lazy">
        <h3 class="text-base font-bold text-brand-blue">{{ item.title }}</h3>
        <p class="text-sm text-brand-blue/80 mb-3 flex-1 line-clamp-2">{{ item.description }}</p>
        <div class="flex items-center justify-between gap-2 flex-wrap">
          <a href="#contact" class="inline-flex items-center justify-center rounded-xl bg-brand-blue text-white font-semibold px-3 py-1.5 text-xs hover:bg-brand-blue/90 transition-colors w-fit">{{ item.cta }}</a>
          <button type="button" class="service-see-more text-brand-blue font-semibold text-sm hover:underline focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-blue/50 rounded" aria-label="Read full description of {{ item.title }}">See more</button>
        </div>
        {# Full description in DOM for SEO; hidden from visual users, shown in modal on "See more" #}
        <div class="service-full-description sr-only">{{ item.fullDescription }}</div>
      </div>
      {% endfor %}
    </div>
  </div>

  {# Service detail modal: title and body set by JS when "See more" is clicked; content is also in sr-only above for crawlers #}
  <div id="modal-service-detail" class="fixed inset-0 z-50 flex items-center justify-center p-4 opacity-0 pointer-events-none transition-opacity duration-200" aria-modal="true" aria-labelledby="modal-service-detail-title" role="dialog" hidden>
    <div class="absolute inset-0 bg-black/50" data-modal-close aria-label="Close"></div>
    <div class="relative bg-white rounded-3xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden flex flex-col">
      <div class="flex items-center justify-between p-6 border-b border-gray-200">
        <h2 id="modal-service-detail-title" class="text-xl font-bold text-brand-blue">Service</h2>
        <button type="button" class="p-2 rounded-full text-gray-500 hover:bg-gray-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-blue/50" data-modal-close aria-label="Close modal">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
      </div>
      <div id="modal-service-detail-body" class="p-6 overflow-y-auto flex-1 text-brand-blue/90"></div>
    </div>
  </div>
</section>
